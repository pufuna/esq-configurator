<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Конфигуратор УПП ESQ-HVS</title>
  <style>
    body{margin:0;padding:0;font-family:Segoe UI, Arial, sans-serif;background:#f5f7fb;display:flex;min-height:100vh}
    .wrap{margin:auto;max-width:920px;width:92%;background:#fff;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:28px}
    h1{margin:0 0 22px;color:#1f3147}
    .row{display:flex;gap:14px;align-items:center;padding:12px 0;border-bottom:1px solid #eef1f6;flex-wrap:wrap}
    label{min-width:280px;color:#25364a}
    select,input{flex:1;min-width:260px;padding:10px 12px;border:1px solid #dfe6ef;border-radius:8px;background:#fff}
    .result{margin-top:22px;padding:16px;border:1px dashed #d6deeb;border-radius:10px;background:#f9fbff;font:600 20px/1.35 ui-monospace, SFMono-Regular, Menlo, monospace;color:#1f3147}
    @media (max-width:720px){label{min-width:100%}}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Конфигуратор УПП</h1>

    <div class="row">
      <label for="voltage">Напряжение:</label>
      <select id="voltage">
        <option value="06">6 кВ</option>
        <option value="10">10 кВ</option>
      </select>
    </div>

    <div class="row">
      <label for="power">Мощность УПП (кВт):</label>
      <select id="power"></select>
    </div>

    <div class="row">
      <label for="current">Номинальный ток УПП (А):</label>
      <input id="current" type="text" readonly />
    </div>

    <div class="row">
      <label for="ip">Степень защиты:</label>
      <select id="ip">
        <option value="IP41">IP41</option>
        <option value="IP54">IP54</option>
      </select>
    </div>

    <div class="row">
      <label for="package">Комплектация:</label>
      <select id="package">
        <option value="STD">Обычная</option>
        <option value="E">С вакуумным выключателем</option>
        <option value="S">С выкатными тиристорными блоками</option>
      </select>
    </div>

    <div class="row">
      <label for="ctl">Питание цепей управления:</label>
      <select id="ctl">
        <option value="AC">220В AC</option>
        <option value="DC">220В DC</option>
      </select>
    </div>

    <div class="row">
      <label for="cable">Вводы/выводы кабелей:</label>
      <select id="cable">
        <option value="TOP">Сверху</option>
        <option value="BOT">Снизу</option>
      </select>
    </div>

    <div class="row">
      <label for="proto">Протокол связи:</label>
      <select id="proto">
        <option value="MR">Modbus RTU</option>
        <option value="MT">Modbus TCP</option>
        <option value="PB">ProfibusDP</option>
        <option value="PN">ProfiNet</option>
        <option value="CO">CanOpen</option>
        <option value="EI">Ethernet/IP</option>
      </select>
    </div>

    <div class="result" id="resultLine"></div>
  </div>

  <script>
    const data = {
      "06": {
        220: 25, 280: 35, 315: 40, 400: 45, 450: 55, 560: 65, 630: 75, 710: 90,
        800: 100, 1000: 120, 1120: 135, 1250: 150, 1400: 180, 1600: 200,
        1800: 220, 2000: 240, 2500: 320, 4000: 490, 5000: 600, 6000: 700, 7000: 800
      },
      "10": {
        315: 25, 450: 35, 500: 40, 630: 45, 710: 55, 800: 65, 1000: 75, 1250: 90,
        1400: 100, 1600: 120, 1800: 140, 2000: 150, 2400: 185, 2800: 200, 3000: 220,
        3400: 240, 4000: 300, 5600: 410, 6500: 480, 8000: 580, 11500: 800
      }
    };

    const els = {
      voltage: document.getElementById('voltage'),
      power: document.getElementById('power'),
      current: document.getElementById('current'),
      ip: document.getElementById('ip'),
      pkg: document.getElementById('package'),
      ctl: document.getElementById('ctl'),
      cable: document.getElementById('cable'),
      proto: document.getElementById('proto'),
      result: document.getElementById('resultLine')
    };

    function updatePowerOptions() {
      const v = els.voltage.value;
      const powers = Object.keys(data[v]).map(Number).sort((a,b)=>a-b);
      els.power.innerHTML = '';
      for (const p of powers) {
        const opt = document.createElement('option');
        opt.value = String(p);
        opt.textContent = `${p} кВт`;
        els.power.appendChild(opt);
      }
      updateFromPower();
    }

    function updateFromPower() {
      const v = els.voltage.value;
      const p = Number(els.power.value);
      const I = data[v][p];
      els.current.value = I != null ? I : '';
      render();
    }

    function buildSku() {
      const v = els.voltage.value;
      const I = els.current.value || '000';
      const pkg = els.pkg.value;
      const suffix = (pkg === 'E' || pkg === 'S') ? `-${pkg}` : '';
      return `ESQ-HVS${v}-${I}${suffix}`;
    }

    function render() {
      const sku = buildSku();

      const vText = els.voltage.value === '06' ? '6 кВ' : '10 кВ';
      const pText = els.power.options[els.power.selectedIndex]?.textContent || '';
      const ipText = els.ip.value;
      const ctlText = els.ctl.value === 'AC' ? '220В AC' : '220В DC';
      const cableText = els.cable.value === 'TOP' ? 'Вводы/выводы сверху' : 'Вводы/выводы снизу';
      const protoMap = {MR:'Modbus RTU', MT:'Modbus TCP', PB:'ProfibusDP', PN:'ProfiNet', CO:'CanOpen', EI:'Ethernet/IP'};
      const protoText = protoMap[els.proto.value];

      // Комплектация не добавляется в описание
      els.result.textContent = `${sku} — ${vText}, ${pText}, ${els.current.value} А, ${ipText}, питание ${ctlText}, ${cableText}, протокол ${protoText}`;
    }

    document.addEventListener('DOMContentLoaded', () => {
      els.voltage.value = '06';
      updatePowerOptions();
      els.ip.value = 'IP41';
      els.pkg.value = 'STD';
      els.ctl.value = 'AC';
      els.cable.value = 'BOT';   // по умолчанию "Снизу"
      els.proto.value = 'MR';
      render();

      ['change','input'].forEach(ev=>{
        [els.voltage, els.power, els.ip, els.pkg, els.ctl, els.cable, els.proto].forEach(el=>{
          el.addEventListener(ev, ()=> (el.id==='voltage'?updatePowerOptions():render()));
        });
      });
    });
  </script>
</body>
</html>
